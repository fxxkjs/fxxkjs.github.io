import{c as o,A as C,_ as A,u as B,i as I,o as N,r as g,a as c,b as _,d as k,e as x,w as i,f as s,m as T,g as v,h,C as H,j as q}from"./index-1f0bf087.js";import{s as E,g as U,r as D,a as F}from"./http-8693272f.js";var R={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M477.5 536.3L135.9 270.7l-27.5-21.4 27.6 21.5V792h752V270.8L546.2 536.3a55.99 55.99 0 01-68.7 0z",fill:t}},{tag:"path",attrs:{d:"M876.3 198.8l39.3 50.5-27.6 21.5 27.7-21.5-39.3-50.5z",fill:t}},{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-94.5 72.1L512 482 190.5 232.1h643zm54.5 38.7V792H136V270.8l-27.6-21.5 27.5 21.4 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5h.1l39.3 50.5-27.7 21.5z",fill:e}}]}},name:"mail",theme:"twotone"};const Q=R;function M(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){G(n,r,t[r])})}return n}function G(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var b=function(e,t){var a=M({},e,t.attrs);return o(C,M({},a,{icon:Q}),null)};b.displayName="MailTwoTone";b.inheritAttrs=!1;const J=b;var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const X=W;function j(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){Y(n,r,t[r])})}return n}function Y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var w=function(e,t){var a=j({},e,t.attrs);return o(C,j({},a,{icon:X}),null)};w.displayName="SyncOutlined";w.inheritAttrs=!1;const Z=w;const K={id:"bg"},ee={id:"login"},te={__name:"LogIn",setup(n){const e=B(),{upQx:t}=I("qx");N(()=>{E(),U().then(l=>{l.data.code===1&&(e.push({path:"/Home"}),t(!0))})});let a=g({username:"",password:"",code:"",remember:!0});function r(l){D(l.username,l.password,l.code).then(u=>{u.data.code===1?(e.push({path:"/Home"}),t(!0)):T.warning(u.data.msg,5)})}const f=g(!0),d=g(!1),y=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;function P(){y.test(a.value.username)?(d.value=!0,F(a.value.username).then(l=>{l.data.code===1?(f.value=!1,d.value=!1):(d.value=!1,console.log(l.data.msg))})):T.warning("邮箱格式错误",5)}function L(l){l.target.style.zIndex=0}return(l,u)=>{const O=c("a-input"),p=c("a-form-item"),V=c("a-input-password"),S=c("a-tooltip"),z=c("a-button"),$=c("a-form");return _(),k("div",K,[x("div",ee,[o($,{id:"from",class:"form",model:s(a),name:"basic",autocomplete:"off",onFinish:r},{default:i(()=>[o(p,{name:"username",required:!0,rules:[{required:!0,message:"请检查邮箱格式",pattern:y}]},{default:i(()=>[o(O,{value:s(a).username,"onUpdate:value":u[0]||(u[0]=m=>s(a).username=m),placeholder:"请输入邮箱"},null,8,["value"])]),_:1},8,["rules"]),o(p,{name:"password",rules:[{required:!0,message:"请输入6-16位密码",min:6,max:16}]},{default:i(()=>[o(V,{value:s(a).password,"onUpdate:value":u[1]||(u[1]=m=>s(a).password=m),placeholder:"请输入6-16位密码"},null,8,["value"])]),_:1}),o(p,{name:"code",rules:[{required:!0,message:"请输入6位验证码",pattern:/^\d{6}$/}],class:"components-input-demo-presuffix"},{default:i(()=>[o(O,{value:s(a).code,"onUpdate:value":u[2]||(u[2]=m=>s(a).code=m),placeholder:"请输入6位邮箱验证码"},{suffix:i(()=>[f.value&&!d.value?(_(),v(S,{key:0,title:"发送邮件验证码"},{default:i(()=>[o(s(J),{onClick:P})]),_:1})):h("",!0),f.value&&d.value?(_(),v(s(Z),{key:1,spin:""})):h("",!0),f.value?h("",!0):(_(),v(S,{key:2,title:"验证码10分钟有效"},{default:i(()=>[o(s(H))]),_:1}))]),_:1},8,["value"])]),_:1}),o(p,null,{default:i(()=>[o(z,{type:"primary","html-type":"submit"},{default:i(()=>[q("登录 | 注册")]),_:1})]),_:1})]),_:1},8,["model"])]),x("img",{id:"bgimg",src:"https://cdn.webnote.fun/img/bg.webp",onLoad:L},null,32)])}}},oe=A(te,[["__scopeId","data-v-7d53d133"]]);export{oe as default};
